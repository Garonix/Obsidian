这些 `/vol00` 的挂载是由 **Systemd 的 mount 单元**管理的
查看当前自动挂载的硬盘

```shell
systemctl list-units --type mount | grep vol00
```

输出形如：
```shell
me@nas:/root$ systemctl list-units --type mount | grep vol00
  vol00-FSLC_MAL314000SA\x2dT72.mount                               loaded active mounted /vol00/FSLC_MAL314000SA-T72
  vol00-Hitachi_HUS724030ALE641.mount                               loaded active mounted /vol00/Hitachi_HUS724030ALE641
  vol00-WUH721816ALE6L4.mount                                       loaded active mounted /vol00/WUH721816ALE6L4
```

停止对应的`mount`单元

```shell
systemctl stop 'vol00-FSLC_MAL314000SA\x2dT72.mount'
systemctl stop 'vol00-Hitachi_HUS724030ALE641.mount'
systemctl stop 'vol00-WUH721816ALE6L4.mount'
systemctl stop 'vol00-KIOXIA\x2dEXCERIA\x20SSD.mount'
```

查看硬盘UUID

```shell
blkid
```

修改挂载点文件

```shell
sudo nano /etc/fstab
```

在文件最后，换行再续写，使用`nofail`参数，即使挂载错误也能进入系统：

```
UUID=xxxxxxxxxxxxxxxxxxx /srv/disk2 ext4 defaults,nofail 0 0
UUID=yyyyyyyyyyyyyyyyyyy /srv/disk1 ext4 defaults,nofail 0 0
```

使用如下命令进行挂载验证，有错误会报错：

```shell
mount -a
```

===============================================================

疑似`mountmgr.service`就是管理自动挂载的服务

```shell
# 直接停止
systemctl disable --now mountmgr
```

===============================================================
以上已失败

**第一步：创建并编写 Shell 脚本**

这个脚本包含你想要执行的命令。我们将它保存在一个标准的可执行文件路径下。

```shell
sudo nano /usr/local/bin/stop-dynamic-mounts.sh
```


```shell
#!/bin/bash

# 这是一个简单的脚本，用于停止可能存在的动态挂载单元
# 并且尝试重新挂载 /etc/fstab 中定义的所有文件系统

echo "Stopping dynamic mount units..."

# 尝试停止指定的动态挂载单元，使用单引号确保特殊字符被正确解释
systemctl stop 'vol00-FSLC_MAL314000SA\x2dT72.mount'
systemctl stop 'vol00-Hitachi_HUS724030ALE641.mount'
systemctl stop 'vol00-WUH721816ALE6L4.mount'
systemctl stop 'vol00-KIOXIA\x2dEXCERIA\x20SSD.mount'

echo "Attempting to mount all filesystems from /etc/fstab..."

# 尝试挂载 /etc/fstab 中定义的所有文件系统
mount -a

echo "Script finished."

exit 0
```

赋予可执行权限

```shell
sudo chmod +x /usr/local/bin/stop-dynamic-mounts.sh
```

**第二步：创建 Systemd 服务单元文件**

这个文件告诉 Systemd 如何管理你的脚本作为一个服务。我们将服务命名为 `my-mounts.service` 并放在 `/etc/systemd/system/` 目录下

```shell
sudo nano /etc/systemd/system/my-mounts.service
```

```toml
[Unit]
Description=Stop dynamic mount units and re-mount fstab entries
# 描述这个服务是做什么的

# 在 multi-user.target 之后运行，确保系统已进入多用户模式
# 也可以考虑添加 local-fs.target，确保本地文件系统已挂载
After=multi-user.target

[Service]
# Type=oneshot 适用于执行一个任务然后退出的服务
Type=oneshot
# 指定要执行的脚本的完整路径
ExecStart=/usr/local/bin/stop-dynamic-mounts.sh
# 对于 oneshot 服务，默认就是 no，明确写出更清晰
RemainAfterExit=no
# 如果需要，可以配置在服务失败时重启
# Restart=on-failure
# RestartSec=5

[Install]
# 服务在 multi-user.target 阶段被启动
WantedBy=multi-user.target
```

**第三步：重载 Systemd 管理器并启用服务**

让 Systemd 识别你新创建的服务单元文件。

重载守护进程

```shell
systemctl daemon-reload
```

启用服务

```shell
systemctl enable my-mounts.service
```

